{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ShipSite Configuration",
  "description": "Configuration file for a ShipSite project (shipsite.json).",
  "type": "object",
  "required": ["name", "url", "pages"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference for IDE autocompletion."
    },
    "name": {
      "type": "string",
      "description": "Site name, used in metadata and header."
    },
    "url": {
      "type": "string",
      "format": "uri",
      "description": "Canonical site URL (e.g. \"https://example.com\")."
    },
    "logo": {
      "description": "Logo path or light/dark variants.",
      "oneOf": [
        { "type": "string" },
        {
          "type": "object",
          "required": ["light", "dark"],
          "properties": {
            "light": { "type": "string" },
            "dark": { "type": "string" }
          },
          "additionalProperties": false
        }
      ]
    },
    "favicon": {
      "type": "string",
      "description": "Path to favicon (e.g. \"/favicon.png\")."
    },
    "ogImage": {
      "type": "string",
      "description": "Default Open Graph image path."
    },
    "colors": {
      "type": "object",
      "description": "Brand colors.",
      "properties": {
        "primary": { "type": "string", "description": "Primary brand color (hex)." },
        "accent": { "type": "string", "description": "Accent color (hex)." },
        "background": { "type": "string", "description": "Background color (hex)." },
        "text": { "type": "string", "description": "Text color (hex)." }
      },
      "required": ["primary"],
      "additionalProperties": false
    },
    "fonts": {
      "type": "object",
      "description": "Font families.",
      "properties": {
        "heading": { "type": "string" },
        "body": { "type": "string" }
      },
      "additionalProperties": false
    },
    "i18n": {
      "type": "object",
      "description": "Internationalization settings.",
      "properties": {
        "defaultLocale": { "type": "string", "default": "en" },
        "locales": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["en"]
        },
        "localePrefix": {
          "type": "string",
          "enum": ["as-needed", "always", "never"],
          "default": "as-needed"
        }
      },
      "additionalProperties": false
    },
    "navigation": {
      "type": "object",
      "description": "Header navigation.",
      "properties": {
        "items": {
          "type": "array",
          "items": { "$ref": "#/$defs/navigationItem" }
        },
        "cta": { "$ref": "#/$defs/navigationItem" }
      },
      "required": ["items"],
      "additionalProperties": false
    },
    "footer": {
      "type": "object",
      "description": "Footer configuration.",
      "properties": {
        "columns": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["title", "links"],
            "properties": {
              "title": { "$ref": "#/$defs/localizedString", "description": "Column heading." },
              "links": {
                "type": "array",
                "items": { "$ref": "#/$defs/navigationItem" }
              }
            },
            "additionalProperties": false
          }
        },
        "social": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["platform", "href"],
            "properties": {
              "platform": { "type": "string", "description": "e.g. \"github\", \"twitter\", \"linkedin\"." },
              "href": { "type": "string" }
            },
            "additionalProperties": false
          }
        },
        "copyright": { "$ref": "#/$defs/localizedString" }
      },
      "additionalProperties": false
    },
    "pages": {
      "type": "array",
      "description": "Page definitions.",
      "items": {
        "type": "object",
        "required": ["slug", "type", "content"],
        "properties": {
          "slug": { "type": "string", "description": "URL slug (empty string for root/landing)." },
          "type": {
            "type": "string",
            "description": "Page type.",
            "enum": ["landing", "page", "blog-index", "blog-article", "legal"]
          },
          "content": { "type": "string", "description": "Content folder name inside content/." },
          "locales": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Locales this page is available in. Defaults to all configured locales."
          }
        },
        "additionalProperties": false
      }
    },
    "blog": {
      "type": "object",
      "description": "Blog configuration.",
      "properties": {
        "authors": {
          "type": "object",
          "description": "Author definitions keyed by ID.",
          "additionalProperties": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": { "type": "string" },
              "role": { "$ref": "#/$defs/localizedString" },
              "image": { "type": "string" },
              "bio": { "$ref": "#/$defs/localizedString" }
            },
            "additionalProperties": false
          }
        },
        "categories": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["key", "label"],
            "properties": {
              "key": { "type": "string" },
              "label": {
                "type": "object",
                "description": "Locale â†’ label map (e.g. { \"en\": \"Tech\", \"de\": \"Technik\" }).",
                "additionalProperties": { "type": "string" }
              }
            },
            "additionalProperties": false
          }
        },
        "categoryMap": {
          "type": "object",
          "description": "Maps raw category strings to canonical category keys.",
          "additionalProperties": { "type": "string" }
        }
      },
      "additionalProperties": false
    },
    "redirects": {
      "type": "array",
      "description": "URL redirects. Evaluated by the edge worker before serving content.",
      "items": {
        "type": "object",
        "required": ["source", "destination"],
        "properties": {
          "source": {
            "type": "string",
            "description": "Source path starting with / (e.g. \"/old-pricing\").",
            "pattern": "^/"
          },
          "destination": {
            "type": "string",
            "description": "Destination path or full URL (e.g. \"/pricing\" or \"https://example.com\")."
          },
          "permanent": {
            "type": "boolean",
            "default": true,
            "description": "301 (permanent) or 302 (temporary). Default: true (301)."
          }
        },
        "additionalProperties": false
      },
      "default": []
    },
    "analytics": {
      "type": "object",
      "description": "Analytics and tracking integrations.",
      "properties": {
        "vercel": { "type": "boolean", "description": "Enable Vercel Analytics." },
        "cloudflare": { "type": "string", "description": "Cloudflare Web Analytics beacon token." },
        "googleTagManager": { "type": "string", "description": "GTM container ID (e.g. \"GTM-XXXXX\")." },
        "googleAnalytics": { "type": "string", "description": "Google Analytics 4 Measurement ID (e.g. \"G-XXXXXXX\")." },
        "plausible": {
          "description": "Plausible Analytics. Set to true to auto-detect domain from url, or provide a custom domain string.",
          "oneOf": [
            { "type": "boolean" },
            { "type": "string" }
          ]
        },
        "posthog": {
          "type": "object",
          "description": "PostHog product analytics.",
          "required": ["apiKey"],
          "properties": {
            "apiKey": { "type": "string", "description": "PostHog project API key." },
            "apiHost": { "type": "string", "description": "PostHog API host (default: https://us.i.posthog.com)." }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "seo": {
      "type": "object",
      "description": "SEO settings.",
      "properties": {
        "llmsTxt": {
          "type": "boolean",
          "default": true,
          "description": "Generate /llms.txt and /llms-full.txt for AI discovery. Default: true."
        }
      },
      "additionalProperties": false
    },
    "scripts": {
      "type": "array",
      "description": "Custom scripts to inject into the site. Each script can be an external URL or inline content.",
      "items": {
        "type": "object",
        "description": "Must have either \"src\" or \"content\" (or both).",
        "anyOf": [
          { "required": ["src"] },
          { "required": ["content"] }
        ],
        "properties": {
          "src": { "type": "string", "description": "External script URL." },
          "content": { "type": "string", "description": "Inline script content." },
          "strategy": {
            "type": "string",
            "enum": ["afterInteractive", "beforeInteractive", "lazyOnload"],
            "default": "afterInteractive",
            "description": "Next.js Script loading strategy."
          },
          "location": {
            "type": "string",
            "enum": ["head", "body"],
            "default": "head",
            "description": "Where to inject the script (head or body)."
          }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false,
  "$defs": {
    "localizedString": {
      "description": "A plain string or a locale map (e.g. { \"en\": \"Features\", \"de\": \"Funktionen\" }).",
      "oneOf": [
        { "type": "string" },
        {
          "type": "object",
          "additionalProperties": { "type": "string" }
        }
      ]
    },
    "navigationItem": {
      "type": "object",
      "required": ["label", "href"],
      "properties": {
        "label": { "$ref": "#/$defs/localizedString", "description": "Display text (plain string or locale map)." },
        "href": { "type": "string", "description": "Link target." }
      },
      "additionalProperties": false
    }
  }
}
